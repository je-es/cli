{"version":3,"sources":["../src/lib/cli.ts"],"sourcesContent":["// cli.ts\n//\n// Developed with ❤️ by Maysara.\n\n\n\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\n\n    import * as types from './types.d';\n    export * from './types.d';\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔═══════════════════════════════════════ ERRORS ═══════════════════════════════════════╗\n\n    export class CLIError extends Error {\n        constructor(message: string, public code: string = 'CLI_ERROR') {\n            super(message);\n            this.name = 'CLIError';\n            Error.captureStackTrace?.(this, CLIError);\n        }\n    }\n\n    export class ValidationError extends CLIError {\n        constructor(message: string) {\n            super(message, 'VALIDATION_ERROR');\n            this.name = 'ValidationError';\n        }\n    }\n\n    export class CommandNotFoundError extends CLIError {\n        constructor(command: string) {\n            super(`Command '${command}' not found`, 'COMMAND_NOT_FOUND');\n            this.name = 'CommandNotFoundError';\n        }\n    }\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\n\n    class ArgumentParser {\n    private tokens: string[] = [];\n    private position = 0;\n\n    parse(args: string[]): { command?: string; options: Record<string, any>; positional: string[] } {\n        this.tokens = args;\n        this.position = 0;\n\n        const result: { command?: string; options: Record<string, any>; positional: string[] } = {\n        options: {},\n        positional: []\n        };\n\n        // First token might be a command\n        if (this.hasNext() && !this.peek().startsWith('-')) {\n        result.command = this.consume();\n        }\n\n        while (this.hasNext()) {\n        const token = this.consume();\n\n        if (token.startsWith('--')) {\n            // Long option\n            const [key, value] = token.slice(2).split('=');\n            if (value !== undefined) {\n            result.options[key] = value;\n            } else if (this.hasNext() && !this.peek().startsWith('-')) {\n            result.options[key] = this.consume();\n            } else {\n            result.options[key] = true;\n            }\n        } else if (token.startsWith('-') && token.length > 1) {\n            // Short option(s)\n            const flags = token.slice(1).split('');\n            for (let i = 0; i < flags.length; i++) {\n            const flag = flags[i];\n            if (i === flags.length - 1 && this.hasNext() && !this.peek().startsWith('-')) {\n                result.options[flag] = this.consume();\n            } else {\n                result.options[flag] = true;\n            }\n            }\n        } else {\n            // Positional argument\n            result.positional.push(token);\n        }\n        }\n\n        return result;\n    }\n\n    private hasNext(): boolean {\n        return this.position < this.tokens.length;\n    }\n\n    private peek(): string {\n        return this.tokens[this.position];\n    }\n\n    private consume(): string {\n        return this.tokens[this.position++];\n    }\n    }\n\n    export class CLI {\n    private config: types.CLIConfig;\n    private commands: Map<string, types.CommandConfig> = new Map();\n    private globalOptions: Map<string, types.OptionConfig> = new Map();\n    private parser = new ArgumentParser();\n\n    constructor(config: types.CLIConfig) {\n        this.config = config;\n        this.initializeCommands();\n        this.initializeGlobalOptions();\n    }\n\n    private initializeCommands(): void {\n        if (!this.config.commands) return;\n\n        for (const cmd of this.config.commands) {\n        this.commands.set(cmd.name, cmd);\n        if (cmd.aliases) {\n            for (const alias of cmd.aliases) {\n            this.commands.set(alias, cmd);\n            }\n        }\n        }\n    }\n\n    private initializeGlobalOptions(): void {\n        if (!this.config.globalOptions) return;\n\n        for (const opt of this.config.globalOptions) {\n        this.globalOptions.set(opt.name, opt);\n        this.globalOptions.set(opt.flag, opt);\n        if (opt.aliases) {\n            for (const alias of opt.aliases) {\n            this.globalOptions.set(alias, opt);\n            }\n        }\n        }\n    }\n\n    async run(argv: string[] = process.argv.slice(2)): Promise<void> {\n        try {\n        const parsed = this.parser.parse(argv);\n\n        // Handle help (always check this first)\n        if (parsed.options.help || parsed.options.h) {\n            this.showHelp(parsed.command);\n            return;\n        }\n\n        // No command provided - check for version or show help\n        if (!parsed.command) {\n            // Handle version only when no command\n            if (parsed.options.version || parsed.options.v) {\n            console.log(`${this.config.name} v${this.config.version}`);\n            return;\n            }\n            \n            if (this.commands.size === 0) {\n            throw new CLIError('No command specified');\n            }\n            this.showHelp();\n            return;\n        }\n\n        // Find command\n        const command = this.commands.get(parsed.command);\n        if (!command) {\n            throw new CommandNotFoundError(parsed.command);\n        }\n\n        // Check if -v/--version should be handled as version (only if command doesn't use -v)\n        const commandUsesV = command.options?.some(opt => \n            opt.flag === '-v' || opt.aliases?.includes('-v')\n        );\n        \n        if (!commandUsesV && (parsed.options.version || parsed.options.v)) {\n            console.log(`${this.config.name} v${this.config.version}`);\n            return;\n        }\n\n        // Parse and validate\n        const result = this.parseCommand(command, parsed.positional, parsed.options);\n\n        // Execute command\n        if (command.action) {\n            await command.action(result);\n        }\n        } catch (error) {\n        this.handleError(error);\n        }\n    }\n\n    private parseCommand(\n        command: types.CommandConfig,\n        positional: string[],\n        rawOptions: Record<string, any>\n    ): any {\n        const result: any = { args: {}, options: {} };\n\n        // Parse arguments\n        if (command.args) {\n        for (let i = 0; i < command.args.length; i++) {\n            const argConfig = command.args[i];\n            const value = positional[i];\n\n            if (!value) {\n            if (argConfig.required !== false) {\n                throw new ValidationError(`Missing required argument: ${argConfig.name}`);\n            }\n            result.args[argConfig.name] = argConfig.default;\n            continue;\n            }\n\n            // Validate\n            if (argConfig.validate) {\n            const validation = argConfig.validate(value);\n            if (validation !== true) {\n                throw new ValidationError(\n                typeof validation === 'string'\n                    ? validation\n                    : `Invalid value for argument '${argConfig.name}': ${value}`\n                );\n            }\n            }\n\n            result.args[argConfig.name] = value;\n        }\n        }\n\n        // Parse options\n        if (command.options) {\n        for (const optConfig of command.options) {\n            const value = this.getOptionValue(optConfig, rawOptions);\n\n            if (value === undefined) {\n            if (optConfig.required) {\n                throw new ValidationError(`Missing required option: --${optConfig.name}`);\n            }\n            result.options[optConfig.name] = optConfig.default;\n            continue;\n            }\n\n            // Type conversion\n            const converted = this.convertOptionType(value, optConfig.type);\n\n            // Validate\n            if (optConfig.validate) {\n            const validation = optConfig.validate(converted);\n            if (validation !== true) {\n                throw new ValidationError(\n                typeof validation === 'string'\n                    ? validation\n                    : `Invalid value for option '${optConfig.name}': ${converted}`\n                );\n            }\n            }\n\n            result.options[optConfig.name] = converted;\n        }\n        }\n\n        return result;\n    }\n\n    private getOptionValue(config: types.OptionConfig, rawOptions: Record<string, any>): any {\n        // Check by name first\n        if (rawOptions[config.name] !== undefined) {\n        return rawOptions[config.name];\n        }\n\n        // Check by flag (remove ALL leading dashes)\n        const flag = config.flag.replace(/^-+/, '');\n        if (rawOptions[flag] !== undefined) {\n        return rawOptions[flag];\n        }\n\n        // Check aliases\n        if (config.aliases) {\n        for (const alias of config.aliases) {\n            const cleanAlias = alias.replace(/^-+/, '');\n            if (rawOptions[cleanAlias] !== undefined) {\n            return rawOptions[cleanAlias];\n            }\n        }\n        }\n\n        return undefined;\n    }\n\n    private convertOptionType(value: any, type?: 'boolean' | 'string' | 'number'): any {\n        if (type === 'number') {\n        const num = Number(value);\n        if (isNaN(num)) {\n            throw new ValidationError(`Expected number, got: ${value}`);\n        }\n        return num;\n        }\n        if (type === 'boolean') {\n        if (value === true || value === 'true') return true;\n        if (value === false || value === 'false') return false;\n        return !!value;\n        }\n        return String(value);\n    }\n\n    private showHelp(commandName?: string): void {\n        if (commandName) {\n        const command = this.commands.get(commandName);\n        if (command) {\n            this.showCommandHelp(command);\n            return;\n        }\n        }\n\n        console.log(`${this.config.name} v${this.config.version}`);\n        if (this.config.description) {\n        console.log(this.config.description);\n        }\n        console.log();\n        console.log('USAGE:');\n        console.log(`  ${this.config.name} <command> [options]`);\n        console.log();\n        console.log('COMMANDS:');\n\n        const uniqueCommands = new Map<string, types.CommandConfig>();\n        for (const [name, cmd] of this.commands) {\n        if (name === cmd.name) {\n            uniqueCommands.set(name, cmd);\n        }\n        }\n\n        for (const [name, cmd] of uniqueCommands) {\n        const aliases = cmd.aliases ? ` (${cmd.aliases.join(', ')})` : '';\n        console.log(`  ${name}${aliases}`);\n        if (cmd.description) {\n            console.log(`    ${cmd.description}`);\n        }\n        }\n\n        console.log();\n        console.log('OPTIONS:');\n        console.log('  -h, --help       Show help');\n        console.log('  -v, --version    Show version');\n    }\n\n    private showCommandHelp(command: types.CommandConfig): void {\n        console.log(`${command.name}`);\n        if (command.description) {\n        console.log(command.description);\n        }\n        console.log();\n\n        // Usage\n        let usage = `${this.config.name} ${command.name}`;\n        if (command.args) {\n        usage += ' ' + command.args.map(a =>\n            a.required !== false ? `<${a.name}>` : `[${a.name}]`\n        ).join(' ');\n        }\n        console.log('USAGE:');\n        console.log(`  ${usage}`);\n        console.log();\n\n        // Arguments\n        if (command.args && command.args.length > 0) {\n        console.log('ARGUMENTS:');\n        for (const arg of command.args) {\n            const req = arg.required !== false ? 'required' : 'optional';\n            console.log(`  ${arg.name} (${req})`);\n            if (arg.description) {\n            console.log(`    ${arg.description}`);\n            }\n        }\n        console.log();\n        }\n\n        // Options\n        if (command.options && command.options.length > 0) {\n        console.log('OPTIONS:');\n        for (const opt of command.options) {\n            const aliases = opt.aliases ? `, ${opt.aliases.join(', ')}` : '';\n            const req = opt.required ? ' (required)' : '';\n            console.log(`  ${opt.flag}${aliases}${req}`);\n            if (opt.description) {\n            console.log(`    ${opt.description}`);\n            }\n        }\n        console.log();\n        }\n\n        // Examples\n        if (command.examples && command.examples.length > 0) {\n        console.log('EXAMPLES:');\n        for (const example of command.examples) {\n            console.log(`  ${example}`);\n        }\n        console.log();\n        }\n    }\n\n    private handleError(error: unknown): void {\n        if (error instanceof CLIError) {\n        console.error(`Error: ${error.message}`);\n        process.exit(1);\n        } else if (error instanceof Error) {\n        console.error(`Unexpected error: ${error.message}`);\n        if (process.env.DEBUG) {\n            console.error(error.stack);\n        }\n        process.exit(1);\n        } else {\n        console.error('An unknown error occurred');\n        process.exit(1);\n        }\n    }\n    }\n\n    export class CLIBuilder {\n    private config: types.CLIConfig;\n\n    constructor(name: string, version: string) {\n        this.config = { name, version, commands: [], globalOptions: [] };\n    }\n\n    description(desc: string): this {\n        this.config.description = desc;\n        return this;\n    }\n\n    command(config: types.CommandConfig): this {\n        if (!this.config.commands) this.config.commands = [];\n        this.config.commands.push(config);\n        return this;\n    }\n\n    globalOption(option: types.OptionConfig): this {\n        if (!this.config.globalOptions) this.config.globalOptions = [];\n        this.config.globalOptions.push(option);\n        return this;\n    }\n\n    build(): CLI {\n        return new CLI(this.config);\n    }\n    }\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ ════ ════════════════════════════════════════╗\n\n    export function cli(name: string, version: string): CLIBuilder {\n        return new CLIBuilder(name, version);\n    }\n\n    export default cli;\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝"],"mappings":"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","names":["_a"]}